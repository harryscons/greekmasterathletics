// INLINE VALIDATION - Add event listeners for warning buttons
// These should be added inside setupEventListeners function after line 604

// Inline Validation Handlers
const btnAgeWarningProceed = document.getElementById('btnAgeWarningProceed');
if (btnAgeWarningProceed) {
    btnAgeWarningProceed.addEventListener('click', () => {
        document.getElementById('ageValidationWarning').classList.add('hidden');
        // Bypass validation and submit
        const evt = new Event('submit', { bubbles: true, cancelable: true });
        evt._forceSubmit = true;
        recordForm.dispatchEvent(evt);
    });
}

const btnAgeWarningCancel = document.getElementById('btnAgeWarningCancel');
if (btnAgeWarningCancel) {
    btnAgeWarningCancel.addEventListener('click', () => {
        document.getElementById('age ValidationWarning').classList.add('hidden');
    });
}

// HANDLE FORM SUBMIT - Replace confirm with inline warning
// In handleFormSubmit, at line ~1597-1604, replace the confirm block with:

if (selectedAgeGroup !== calculatedGroup) {
    const exactAge = getExactAge(athlete.dob, selectedDate);
    
    // Check if this is a forced submission (from "Save Anyway" button)
    if (!e._forceSubmit) {
        // Show Inline Warning
        const warningDiv = document.getElementById('ageValidationWarning');
        const messageP = document.getElementById('ageValidationMessage');
        
        if (warningDiv && messageP) {
            messageP.innerHTML = `
                <strong>Athlete Age:</strong> ${exactAge}<br>
                <strong>Calculated Category:</strong> ${calculatedGroup || 'Under 35'}<br>
                <strong>Selected Category:</strong> ${selectedAgeGroup || 'None'}<br>
                <br>
                The selected category does not match the athlete's age.
            `;
            warningDiv.classList.remove('hidden');
            // Scroll to warning
            warningDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            return; // Stop submission
        }
    }
}
